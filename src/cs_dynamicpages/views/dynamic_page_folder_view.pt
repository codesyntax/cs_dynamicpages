<html xmlns="http://www.w3.org/1999/xhtml" xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:tal="http://xml.zope.org/namespaces/tal" xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  i18n:domain="cs_dynamicpages" metal:use-macro="context/main_template/macros/master">

<body>

  <metal:custom_title fill-slot="content-title">
    <h1 tal:replace="structure context/@@title" />
  </metal:custom_title>

  <metal:custom_description fill-slot="content-description">
    <p tal:replace="structure context/@@description" />
  </metal:custom_description>

  <metal:content-core fill-slot="content-core">
    <metal:block define-macro="content-core">

      <tal:define tal:define="
                          isAnon context/@@plone_portal_state/anonymous;
                        ">
        <tal:condition tal:condition="isAnon">
          <tal:replace tal:replace="python:context.REQUEST.RESPONSE.redirect(context.aq_parent.absolute_url(),301)">
          </tal:replace>
        </tal:condition>
        <tal:conditionisanon tal:condition="not:isAnon">
          <a class="btn btn-primary btn-lg" href="${context/aq_parent/absolute_url}">View dynamic page</a>
        </tal:conditionisanon>
      </tal:define>

    </metal:block>
  </metal:content-core>
</body>

</html>